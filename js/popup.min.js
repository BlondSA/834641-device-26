var link = document.querySelector(".contacts-button"),
  popup = document.querySelector(".popup-write-us"),
  close = popup.querySelector(".popup-close"),
  form = popup.querySelector("form"),
  Name = popup.querySelector("[name=Name]"),
  Email = popup.querySelector("[name=Email]"),
  Text = popup.querySelector("[name=Text]"),
  isStorageSupport = !0,
  storage = "";
try {
  storage = localStorage.getItem("Name");
} catch (e) {
  isStorageSupport = !1;
}
link.addEventListener("click", function(e) {
  e.preventDefault(),
    popup.classList.add("popup-write-us-show"),
    storage ? ((Name.value = storage), Email.focus()) : Name.focus();
}),
  close.addEventListener("click", function(e) {
    e.preventDefault(),
      popup.classList.remove("popup-write-us-show"),
      popup.classList.remove("modal-error");
  }),
  form.addEventListener("submit", function(e) {
    Name.value && Email.value && Text.value
      ? isStorageSupport && localStorage.setItem("Name", Name.value)
      : (e.preventDefault(),
        popup.classList.remove("modal-error"),
        (popup.offsetWidth = popup.offsetWidth),
        popup.classList.add("modal-error"));
  }),
  window.addEventListener("keydown", function(e) {
    27 === e.keyCode &&
      popup.classList.contains("popup-write-us-show") &&
      (e.preventDefault(),
      popup.classList.remove("popup-write-us-show"),
      popup.classList.remove("modal-error"));
  });
